<html layout:decorate="~{layout}">
<head>
    <style>
        #imageFiles {
            display: none;
        }
    </style>
</head>
<div layout:fragment="content" class="container my-3 d-flex align-items-center justify-content-center"
     style="height:80vh;">
    <div class="container">
        <h2>프로필 변경</h2>
        <form th:action="@{/user/edit}" th:object="${userUpdateForm}" method="post" enctype="multipart/form-data">
            <div class="form-group mb-3">
                <label for="imageFiles">
                    <img id="profileImage" th:src="@{${user.image}}" alt=""
                         style="width: 150px; height: 150px; border-radius: 50%;">
                </label>
                <input type="file" id="imageFiles" name="image" accept="image/**" class="form-control">
            </div>
            <!-- 셀렉트 박스 -->
            <div class="row">
                <div class="col">
                    <div class="form-group mb-3">
                        <label for="gender">성별</label>
                        <select id="gender" class="form-select" name="gender" aria-label="Default select example"
                                th:value="${user.gender}">
                            <option value="남성" th:selected="${user.gender == '남성'}">남성</option>
                            <option value="여성" th:selected="${user.gender == '여성'}">여성</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="religion">종교</label>
                        <select id="religion" class="form-select" name="religion" aria-label="Default select example"
                                th:value="${user.religion}">
                            <option value="기독교" th:selected="${user.religion == '기독교'}">기독교</option>
                            <option value="천주교" th:selected="${user.religion == '천주교'}">천주교</option>
                            <option value="불교" th:selected="${user.religion == '불교'}">불교</option>
                            <option value="무교" th:selected="${user.religion == '무교'}">무교</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3">
                        <label for="drinking">음주</label>
                        <select id="drinking" class="form-select" name="drinking" aria-label="Default select example"
                                th:value="${user.drinking}">
                            <option value="전혀안함" th:selected="${user.drinking == '전혀안함'}">전혀안함</option>
                            <option value="가끔" th:selected="${user.drinking == '가끔'}">가끔</option>
                            <option value="자주" th:selected="${user.drinking == '자주'}">자주</option>
                            <option value="매일" th:selected="${user.drinking == '매일'}">매일</option>
                        </select>
                    </div>

                    <div class="form-group mb-3">
                        <label for="smoking">흡연</label>
                        <select id="smoking" class="form-select" name="smoking" aria-label="Default select example"
                                th:value="${user.smoking}">
                            <option value="흡연" th:selected="${user.smoking == '흡연'}">흡연</option>
                            <option value="비흡연" th:selected="${user.smoking == '비흡연'}">비흡연</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3">
                        <label for="education">최종학력</label>
                        <select id="education" class="form-select" name="education" aria-label="Default select example"
                                th:value="${user.education}">
                            <option value="고등학교 졸업" th:selected="${user.education == '고등학교 졸업'}">고등학교 졸업</option>
                            <option value="대학교 재학" th:selected="${user.education == '대학교 재학'}">대학교 재학</option>
                            <option value="대학교 졸업" th:selected="${user.education == '대학교 졸업'}">대학교 졸업</option>
                        </select>
                    </div>

                    <div class="form-group mb-3">
                        <label for="mbti">MBTI</label>
                        <select id="mbti" class="form-select" name="mbti" aria-label="Default select example"
                                th:value="${user.mbti}">
                            <option value="ENFJ" th:selected="${user.mbti == 'ENFJ'}">ENFJ</option>
                            <option value="ENFP" th:selected="${user.mbti == 'ENFP'}">ENFP</option>
                            <option value="ENTJ" th:selected="${user.mbti == 'ENTJ'}">ENTJ</option>
                            <option value="ENTP" th:selected="${user.mbti == 'ENTP'}">ENTP</option>
                            <option value="ESFJ" th:selected="${user.mbti == 'ESFJ'}">ESFJ</option>
                            <option value="ESFP" th:selected="${user.mbti == 'ESFP'}">ESFP</option>
                            <option value="ESTJ" th:selected="${user.mbti == 'ESTJ'}">ESTJ</option>
                            <option value="ESTP" th:selected="${user.mbti == 'ESTP'}">ESTP</option>
                            <option value="INFJ" th:selected="${user.mbti == 'INFJ'}">INFJ</option>
                            <option value="INFP" th:selected="${user.mbti == 'INFP'}">INFP</option>
                            <option value="INTJ" th:selected="${user.mbti == 'INTJ'}">INTJ</option>
                            <option value="INTP" th:selected="${user.mbti == 'INTP'}">INTP</option>
                            <option value="ISFJ" th:selected="${user.mbti == 'ISFJ'}">ISFJ</option>
                            <option value="ISFP" th:selected="${user.mbti == 'ISFP'}">ISFP</option>
                            <option value="ISTJ" th:selected="${user.mbti == 'ISTJ'}">ISTJ</option>
                            <option value="ISTP" th:selected="${user.mbti == 'ISTP'}">ISTP</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group mb-3">
                        <!-- 입력 창 -->
                        <label for="nickName" class="form-label">별명</label>
                        <input type="text" class="form-control" id="nickName" name="nickName"
                               th:value="${user.nickName}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="height">키</label>
                        <input type="text" class="form-control" id="height" name="height" th:value="${user.height}">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3">
                        <label for="age">나이</label>
                        <input type="text" class="form-control" id="age" name="age" th:value="${user.age}">
                    </div>
                    <div class="form-group mb-3">
                        <label for="hobby">취미</label>
                        <input type="text" class="form-control" id="hobby" name="hobby" th:value="${user.hobby}">
                    </div>
                </div>
                <div class="col">
                    <div class="form-group mb-3">
                        <label for="address">주소</label>
                        <input type="text" class="form-control" id="address" name="address" th:value="${user.address}"
                               readonly>
                        <button type="button" onclick="sample5_execDaumPostcode()">주소 찾기</button>
                    </div>
                    <div class="form-group mb-3">
                        <label for="introduce">자기소개</label>
                        <input type="text" class="form-control" id="introduce" name="introduce"
                               th:value="${user.introduce}">
                    </div>
                </div>
            </div>
            <button type="submit">저장</button>
        </form>
    </div>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</div>
<script layout:fragment="script" type="text/javascript">
    function sample5_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                var addr = data.address; // 최종 주소 변수
                document.getElementById("address").value = addr;
            }
        }).open();
    }

    document.getElementById('profileImage').addEventListener('click', function () {
        });

        document.getElementById('imageFiles').addEventListener('change', function (e) {
            var profileImage = document.getElementById('profileImage');
            var file = e.target.files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    profileImage.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });
</script>
</html>