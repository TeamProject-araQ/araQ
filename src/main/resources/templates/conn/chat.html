<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3">
    <div class="card">
        <div style="height:60vh; overflow-y:scroll;" id="chatBoard">
            <div class="chatBox" th:each="chat : ${chatList}"
                 th:classappend="${chat.writer.username.equals(user.username)} ? 'text-end'">
                <img th:if="${!chat.writer.username.equals(user.username)}" th:src="@{${chat.writer.image}}" alt="">
                <div>
                    <p th:text="${chat.writer.nickName}" th:if="${!chat.writer.username.equals(user.username)}"></p>
                    <div class="card" th:classappend="${chat.writer.username.equals(user.username)} ? 'ourColor'">
                        <p class="card-body text-start" th:text="${chat.content}"></p>
                    </div>
                </div>
            </div>
        </div>
        <button class="btn btn-secondary btn-sm p-0 m-auto" type="button" data-bs-toggle="collapse"
                data-bs-target="#chatMoreFunction"
                aria-expanded="false" aria-controls="collapseExample" style="width:50px">
            더보기
        </button>
        <div class="collapse" id="chatMoreFunction">
            <div class="card card-body">
                <div class="d-flex justify-content-around">
                    <a href="#">기능</a>
                    <a href="#">기능</a>
                    <a href="#">기능</a>
                    <a href="#">기능</a>
                </div>
            </div>
        </div>
        <form class="input-group" id="sendChatForm" autocomplete="off">
            <input type="text" id="msgContent" class="form-control">
            <button type="submit" class="btn btn-primary">보내기</button>
        </form>
    </div>
    <a th:href="@{/chat/list}" class="btn btn-secondary">나가기</a>
    <script th:inline="javascript">
        var roomCode = [[${room.code}]];
        var nickName = [[${user.nickName}]];
        var user = [[${user.username}]];
        var target = [[${target.username}]];
    </script>
</div>
<script type="text/javascript" th:src="@{/chat.js}" layout:fragment="script">
</script>
</html>